# An√°lise Explorat√≥ria de Dados (EDA)

Este roteiro apresenta exemplos pr√°ticos alinhados aos slides de `2-AnaliseExploratoria.pdf`.  
Cada chunk inclui um coment√°rio com o **n√∫mero do slide** correspondente.

## Configura√ß√£o

```{r libraries}
# Slides 1‚Äì3: contexto e objetivos da EDA
require_pkg <- function(pkg) {
  if (!requireNamespace(pkg, quietly = TRUE)) {
    stop(sprintf("Pacote '%s' n√£o instalado. Instale com install.packages('%s').", pkg, pkg))
  }
  invisible(TRUE)
}

pkgs <- c(
  "daltoolbox",
  "RColorBrewer",
  "ggplot2",
  "GGally",
  "dplyr",
  "tidyr",
  "scales",
  "gridExtra",
  "aplpack"
)
invisible(lapply(pkgs, require_pkg))

suppressPackageStartupMessages({
  library(daltoolbox)
  library(RColorBrewer)
  library(ggplot2)
  library(GGally)
  library(dplyr)
  library(tidyr)
  library(scales)
  library(gridExtra)
  library(aplpack)
})

colors <- brewer.pal(4, "Set1")
font <- theme(text = element_text(size = 16))
```

```{r helpers}
# FunÁıes helper foram movidas para o daltoolbox:
# plot_correlation(), plot_pair(), plot_pair_adv(), plot_parallel(), plot_pixel()
```

## Dataset Iris

```{r iris_head}
# Slide 11: O Dataset Iris
head(iris[c(1:2, 51:52, 101:102), ])
```

## Estat√≠sticas descritivas

```{r summary}
# Slides 12‚Äì13: medidas descritivas b√°sicas
sum <- summary(iris$Sepal.Length)
sum
```

```{r iqr}
# Slide 14: quartis e IQR
IQR <- sum["3rd Qu."] - sum["1st Qu."]
IQR
```

## Histogramas e densidades

```{r hist_single, fig.width=6, fig.height=4.5}
# Slide 18: histograma
grf <- plot_hist(iris |> dplyr::select(Sepal.Length),
                 label_x = "Sepal Length", color = colors[1]) + font
plot(grf)
```

```{r hist_grid, fig.width=9, fig.height=6.5}
# Slides 16‚Äì17: histogramas agrupados
grf1 <- plot_hist(iris |> dplyr::select(Sepal.Length),
                  label_x = "Sepal.Length", color = colors[1]) + font
grf2 <- plot_hist(iris |> dplyr::select(Sepal.Width),
                  label_x = "Sepal.Width", color = colors[1]) + font
grf3 <- plot_hist(iris |> dplyr::select(Petal.Length),
                  label_x = "Petal.Length", color = colors[1]) + font
grf4 <- plot_hist(iris |> dplyr::select(Petal.Width),
                  label_x = "Petal.Width", color = colors[1]) + font
grid.arrange(grf1, grf2, grf3, grf4, ncol = 2)
```

```{r density_grid, fig.width=9, fig.height=6.5}
# Slide 17: densidade
grf1 <- plot_density(iris |> dplyr::select(Sepal.Length),
                     label_x = "Sepal.Length", color = colors[1]) + font
grf2 <- plot_density(iris |> dplyr::select(Sepal.Width),
                     label_x = "Sepal.Width", color = colors[1]) + font
grf3 <- plot_density(iris |> dplyr::select(Petal.Length),
                     label_x = "Petal.Length", color = colors[1]) + font
grf4 <- plot_density(iris |> dplyr::select(Petal.Width),
                     label_x = "Petal.Width", color = colors[1]) + font
grid.arrange(grf1, grf2, grf3, grf4, ncol = 2)
```

## Boxplots

```{r boxplot, fig.width=6, fig.height=4.5}
# Slide 24: boxplot do Iris
grf <- plot_boxplot(iris, colors = colors[1]) + font
plot(grf)
```

## Compara√ß√£o por classe

```{r density_class, fig.width=9, fig.height=6.5}
# Slide 25: densidade com r√≥tulo de classe
grfA <- plot_density_class(iris |> dplyr::select(Species, Sepal.Length),
                           class_label = "Species", label_x = "Sepal.Length", color = colors[c(1:3)]) + font
grfB <- plot_density_class(iris |> dplyr::select(Species, Sepal.Width),
                           class_label = "Species", label_x = "Sepal.Width", color = colors[c(1:3)]) + font
grfC <- plot_density_class(iris |> dplyr::select(Species, Petal.Length),
                           class_label = "Species", label_x = "Petal.Length", color = colors[c(1:3)]) + font
grfD <- plot_density_class(iris |> dplyr::select(Species, Petal.Width),
                           class_label = "Species", label_x = "Petal.Width", color = colors[c(1:3)]) + font
grid.arrange(grfA, grfB, grfC, grfD, ncol = 2, nrow = 2)
```

```{r boxplot_class, fig.width=9, fig.height=6.5}
# Slide 26: boxplot com r√≥tulo de classe
grfA <- plot_boxplot_class(iris |> dplyr::select(Species, Sepal.Length),
                           class_label = "Species", label_x = "Sepal.Length", color = colors[c(1:3)]) + font
grfB <- plot_boxplot_class(iris |> dplyr::select(Species, Sepal.Width),
                           class_label = "Species", label_x = "Sepal.Width", color = colors[c(1:3)]) + font
grfC <- plot_boxplot_class(iris |> dplyr::select(Species, Petal.Length),
                           class_label = "Species", label_x = "Petal.Length", color = colors[c(1:3)]) + font
grfD <- plot_boxplot_class(iris |> dplyr::select(Species, Petal.Width),
                           class_label = "Species", label_x = "Petal.Width", color = colors[c(1:3)]) + font
grid.arrange(grfA, grfB, grfC, grfD, ncol = 2, nrow = 2)
```

## Scatter plots

```{r scatter, fig.width=6, fig.height=4.5}
# Slide 28: scatter plot
grf <- plot_scatter(iris |> dplyr::select(x = Sepal.Length, value = Sepal.Width) |> mutate(variable = "iris"),
                    label_x = "Sepal.Length") +
  theme(legend.position = "none") + font
plot(grf)
```

```{r scatter_class, fig.width=6, fig.height=4.5}
# Slide 29: scatter plot com classe
grf <- plot_scatter(iris |> dplyr::select(x = Sepal.Length, value = Sepal.Width, variable = Species),
                    label_x = "Sepal.Length", label_y = "Sepal.Width", colors = colors[1:3]) + font
plot(grf)
```

## Correla√ß√£o e matrizes

```{r correlation, fig.width=7.5, fig.height=5}
# Slide 31: correlograma
grf <- plot_correlation(iris |> dplyr::select(Sepal.Width, Sepal.Length, Petal.Width, Petal.Length))
grf
```

```{r scatter_matrix, fig.width=9, fig.height=6.5}
# Slide 32: matriz de dispers√£o
grf <- plot_pair(data = iris, cnames = colnames(iris)[1:4], title = "Iris", colors = colors[1])
print(grf)
```

```{r scatter_matrix_class, fig.width=10, fig.height=6.5}
# Slide 33: matriz de dispers√£o com classe
grf <- plot_pair(data = iris, cnames = colnames(iris)[1:4], clabel = "Species", title = "Iris", colors = colors[1:3])
print(grf)
```

```{r scatter_matrix_adv, fig.width=9, fig.height=6.5}
# Slide 34: matriz de dispers√£o avan√ßada
grf <- plot_pair_adv(data = iris, cnames = colnames(iris)[1:4], title = "Iris", colors = colors[1])
grf
```

```{r scatter_matrix_adv_class, fig.width=9, fig.height=6.5}
# Slide 35: matriz de dispers√£o avan√ßada com classe
grf <- plot_pair_adv(data = iris, cnames = colnames(iris)[1:4], title = "Iris", clabel = "Species", colors = colors[1:3])
grf
```

## Outras visualiza√ß√µes multivariadas

```{r parallel, fig.width=9, fig.height=5}
# Slide 37: coordenadas paralelas
grf <- plot_parallel(data = iris, columns = c(1:4), group = 5, colors = colors[1:3]) + font
plot(grf)
```

```{r pixel, fig.width=9, fig.height=5}
# Slide 38: visualiza√ß√£o orientada a pixels
grf <- plot_pixel(as.matrix(iris[, 1:4]), colors = brewer.pal(11, "Spectral"), title = "Iris")
plot(grf)
```

```{r chernoff, fig.width=9, fig.height=6.5}
# Slides 40‚Äì41: Chernoff faces
set.seed(1)
sample_rows <- sample(1:nrow(iris), 25)
isample <- iris[sample_rows,]
labels <- as.character(rownames(isample))
isample$Species <- NULL
faces(isample, labels = labels, print.info = FALSE, cex = 1)
```

```{r chernoff_class, fig.width=9, fig.height=6.5}
# Slide 42: Chernoff faces com classe
set.seed(1)
sample_rows <- sample(1:nrow(iris), 25)
isample <- iris[sample_rows,]
labels <- as.character(isample$Species)
isample$Species <- NULL
faces(isample, labels = labels, print.info = FALSE, cex = 1)
```

## Refer√™ncias
- Tukey, J. W. (1977). *Exploratory Data Analysis*. Addison-Wesley.
- Cleveland, W. S. (1993). *Visualizing Data*. Hobart Press.
- Wickham, H. (2016). *ggplot2: Elegant Graphics for Data Analysis*. Springer.
- Friendly, M. (2002). Corrgrams: Exploratory displays for correlation matrices. *The American Statistician*.
- Inselberg, A. (1985). The plane with parallel coordinates. *The Visual Computer*.
- Chernoff, H. (1973). The use of faces to represent points in k-dimensional space graphically. *JASA*.

